#!/bin/bash

COMMIT_MSG_FILE=$1
MSG_CONTENT=$(cat "$COMMIT_MSG_FILE")

# 🔍 宽松检查逻辑：
# 只有当提交信息里依然包含 "请在此输入功能描述(必填)" 这几个字时，才报错。
# 只要你删掉了这几个字，或者改成了别的任何内容，都放行！

if echo "$MSG_CONTENT" | grep -q "请在此输入功能描述(必填)"; then
    echo "❌ 提交失败！"
    echo "💡 原因是：你使用了自动生成的合并模版，但没有修改描述。"
    echo "👉 请把 '请在此输入功能描述(必填)' 删掉，换成你自己的话。"
    exit 1
fi

# 其他情况一律放行
exit 0